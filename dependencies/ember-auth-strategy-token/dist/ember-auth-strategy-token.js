// Generated by EmberScript 0.0.7
var get$ = Ember.get;
Em.onLoad('Ember.Application', function (application) {
  application.initializer({
    name: 'ember-auth.strategy.token',
    before: 'ember-auth-load',
    initialize: function (container, app) {
      app.register('authStrategy:token', get$(get$(Em, 'Auth'), 'TokenAuthStrategy'), { singleton: true });
      return app.inject('authStrategy:token', 'auth', 'auth:main');
    }
  });
  return application.initializer({
    name: 'ember-auth.strategy.token-load',
    after: 'ember-auth-load',
    initialize: function (container, app) {
      return container.lookup('authStrategy:token');
    }
  });
});// Generated by EmberScript 0.0.7
var get$ = Ember.get;
var set$ = Ember.set;
set$(get$(Em, 'Auth'), 'TokenAuthStrategy', get$(get$(Em, 'Auth'), 'AuthStrategy').extend({
  init: function () {
    return get$(this, 'auth').reopen({ authToken: get$(Em, 'computed').alias('_strategy.authToken') });
  },
  authToken: null,
  serialize: function (opts) {
    if (!get$(get$(this, 'auth'), 'signedIn'))
      return opts;
    switch (get$(get$(this, 'auth'), 'tokenLocation')) {
    case 'param':
      opts.data || (opts.data = {});
      if ('undefined' !== typeof FormData && null != FormData && get$(opts, 'data') instanceof FormData) {
        get$(opts, 'data').append(get$(get$(this, 'auth'), 'tokenKey'), get$(this, 'authToken'));
      } else {
        get$(opts, 'data')[get$(get$(this, 'auth'), 'tokenKey')] || (get$(opts, 'data')[get$(get$(this, 'auth'), 'tokenKey')] = get$(this, 'authToken'));
      }
      break;
    case 'authHeader':
      opts.headers || (opts.headers = {});
      get$(opts, 'headers').Authorization || (get$(opts, 'headers').Authorization = '' + get$(get$(this, 'auth'), 'tokenHeaderKey') + ' ' + get$(this, 'authToken'));
      break;
    case 'customHeader':
      opts.headers || (opts.headers = {});
      get$(opts, 'headers')[get$(get$(this, 'auth'), 'tokenHeaderKey')] || (get$(opts, 'headers')[get$(get$(this, 'auth'), 'tokenHeaderKey')] = get$(this, 'authToken'));
    }
    return opts;
  },
  deserialize: function (data) {
    set$(this, 'authToken', data[get$(get$(this, 'auth'), 'tokenKey')]);
    if (get$(get$(this, 'auth'), 'tokenIdKey'))
      return set$(get$(get$(this, 'auth'), '_session'), 'userId', data[get$(get$(this, 'auth'), 'tokenIdKey')]);
  }
}));// Generated by EmberScript 0.0.7
var get$ = Ember.get;
get$(Em, 'Auth').reopen({
  tokenKey: null,
  tokenIdKey: null,
  tokenLocation: 'param',
  tokenHeaderKey: null
});