var get$=Ember.get;Em.onLoad("Ember.Application",function(e){return e.initializer({name:"ember-auth",initialize:function(e,n){return n.register("auth:main",get$(n,"Auth")||get$(Em,"Auth"),{singleton:!0}),n.inject("route","auth","auth:main"),n.inject("controller","auth","auth:main"),n.inject("view","auth","auth:main")}}),e.initializer({name:"ember-auth-load",after:"ember-auth",initialize:function(e){return e.lookup("auth:main")}})}),void function(){var e,n=Ember.get,t=Ember.set;e=jQuery,t(Em,"Auth",Ember.Object.extend({_defaults:{},_config:function(t,r){return null!=r?function(e){var s,i;for(s in r)i=r[s],n(this,"_defaults")[t]||(n(this,"_defaults")[t]={}),e.push(n(this,"_defaults")[t][s]=i);return e}.call(this,[]):e.extend(!0,{},n(this,"_defaults")[t],this.get(t))},_handlers:{signInSuccess:[],signInError:[],signOutSuccess:[],signOutError:[],sendSuccess:[],sendError:[]},module:Ember.computed(function(){var e,t;t={};for(var r=0,s=n(this,"modules").length;s>r;++r)e=n(this,"modules")[r],t[e]=n(this,"container").lookup("authModule:"+e);return t}).property("modules.@each"),_request:Ember.computed(function(){return n(this,"container").lookup("authRequest:"+n(this,"request"))}).property("request"),_response:Ember.computed(function(){return n(this,"container").lookup("authResponse:"+n(this,"response"))}).property("response"),_strategy:Ember.computed(function(){return n(this,"container").lookup("authStrategy:"+n(this,"strategy"))}).property("strategy"),_session:Ember.computed(function(){return n(this,"container").lookup("authSession:"+n(this,"session"))}).property("session"),signIn:function(e,t){var r;return"undefined"==typeof t?(t=e,e=n(this,"_request").resolveUrl(n(this,"signInEndPoint"))):e=n(this,"_request").resolveUrl(e),t||(t={}),new(n(n(Em,"RSVP"),"Promise"))((r=this,function(s,i){var u,o;return n(r,"_request").signIn(e,n(r,"_strategy").serialize(t)).then((u=r,function(e){var t,r,o;t=n(u,"_response").canonicalize(e),o=[],o.push(n(u,"_strategy").deserialize(t)),o.push(n(u,"_session").start(t));for(var a=0,l=n(n(u,"_handlers"),"signInSuccess").length;l>a;++a)r=n(n(u,"_handlers"),"signInSuccess")[a],o.push(r(t));return n(Em,"RSVP").all(o).then(function(){return s(t)}).fail(function(){return i(t)})})).fail((o=r,function(e){var t,r,s;t=n(o,"_response").canonicalize(e),s=[],s.push(n(o,"_strategy").deserialize(t)),s.push(n(o,"_session").end(t));for(var u=0,a=n(n(o,"_handlers"),"signInError").length;a>u;++u)r=n(n(o,"_handlers"),"signInError")[u],s.push(r(t));return n(Em,"RSVP").all(s).then(function(){return i(t)}).fail(function(){return i(t)})}))}))},signOut:function(e,t){var r;return"undefined"==typeof t?(t=e,e=n(this,"_request").resolveUrl(n(this,"signOutEndPoint"))):e=n(this,"_request").resolveUrl(e),t||(t={}),new(n(n(Em,"RSVP"),"Promise"))((r=this,function(s,i){var u,o;return n(r,"_request").signOut(e,n(r,"_strategy").serialize(t)).then((u=r,function(e){var t,r,o;t=n(u,"_response").canonicalize(e),o=[],o.push(n(u,"_strategy").deserialize(t)),o.push(n(u,"_session").end(t));for(var a=0,l=n(n(u,"_handlers"),"signOutSuccess").length;l>a;++a)r=n(n(u,"_handlers"),"signOutSuccess")[a],o.push(r(t));return n(Em,"RSVP").all(o).then(function(){return s(t)}).fail(function(){return i(t)})})).fail((o=r,function(e){var t,r,s;t=n(o,"_response").canonicalize(e),s=[];for(var u=0,a=n(n(o,"_handlers"),"signOutError").length;a>u;++u)r=n(n(o,"_handlers"),"signOutError")[u],s.push(r(t));return n(Em,"RSVP").all(s).then(function(){return i(t)}).fail(function(){return i(t)})}))}))},send:function(e,t){var r;return"undefined"==typeof t?(t=e,e=n(this,"_request").resolveUrl("")):e=n(this,"_request").resolveUrl(e),t||(t={}),new(n(n(Em,"RSVP"),"Promise"))((r=this,function(s,i){var u,o;return n(r,"_request").send(e,n(r,"_strategy").serialize(t)).then((u=r,function(e){var t,r;r=[];for(var o=0,a=n(n(u,"_handlers"),"sendSuccess").length;a>o;++o)t=n(n(u,"_handlers"),"sendSuccess")[o],r.push(t(e));return n(Em,"RSVP").all(r).then(function(){return s(e)}).fail(function(){return i(e)})})).fail((o=r,function(e){var t,r;r=[];for(var s=0,u=n(n(o,"_handlers"),"sendError").length;u>s;++s)t=n(n(o,"_handlers"),"sendError")[s],r.push(t(e));return n(Em,"RSVP").all(r).then(function(){return i(e)}).fail(function(){return i(e)})}))}))},createSession:function(e){var t;return new(n(n(Em,"RSVP"),"Promise"))((t=this,function(r,s){var i,u;"string"==typeof e&&(e=n(t,"_response").canonicalize(e)),u=[],u.push(n(t,"_strategy").deserialize(e)),u.push(n(t,"_session").start(e));for(var o=0,a=n(n(t,"_handlers"),"signInSuccess").length;a>o;++o)i=n(n(t,"_handlers"),"signInSuccess")[o],u.push(i(e));return n(Em,"RSVP").all(u).then(function(){return r(e)}).fail(function(){return s(e)})}))},destroySession:function(e){var t;return new(n(n(Em,"RSVP"),"Promise"))((t=this,function(r,s){var i,u;"string"==typeof e&&(e=n(t,"_response").canonicalize(e)),u=[],u.push(n(t,"_strategy").deserialize(e)),u.push(n(t,"_session").end(e));for(var o=0,a=n(n(t,"_handlers"),"signOutSuccess").length;a>o;++o)i=n(n(t,"_handlers"),"signOutSuccess")[o],u.push(i(e));return n(Em,"RSVP").all(u).then(function(){return r(e)}).fail(function(){return s(e)})}))},addHandler:function(e,t){var r;return r="Handler type unrecognized; you passed in `"+e+"`",Em.assert(r,null!=n(this,"_handlers")[e]),r="Handler must be a function",Em.assert(r,"function"==typeof t),n(this,"_handlers")[e].pushObject(t)},removeHandler:function(e,t){var r;return r="Handler type unrecognized; you passed in `"+e+"`",Em.assert(r,null!=n(this,"_handlers")[e]),r="Handler must be a function or omitted for removing all handlers",Em.assert(r,"function"==typeof t||"undefined"==typeof t),null!=t?n(this,"_handlers")[e].removeObject(t):n(this,"_handlers")[e]=[]},_ensurePromise:function(e){return"function"==typeof n(e,"then")?e:new(n(n(Em,"RSVP"),"resolve"))(e)}}))}.call(this),void function(){var e,n=Ember.get,t=Ember.set;e=function(e){return function(){throw new(n(Em,"Error"))("Your request adapter "+this.toString()+" must implement the required method `"+e+"`")}},t(n(Em,"Auth"),"AuthRequest",Ember.Object.extend({signIn:e("signIn"),signOut:e("signOut"),send:e("send"),resolveUrl:function(e){var t;return t=n(n(this,"auth"),"baseUrl"),t&&"/"===t[n(t,"length")-1]&&(t=t.substr(0,n(t,"length")-1)),"/"===(null!=e?e[0]:void 0)&&(e=e.substr(1,n(e,"length"))),[t,e].join("/")}}))}.call(this),void function(){var e,n=Ember.get,t=Ember.set;e=function(e){return function(){throw new(n(Em,"Error"))("Your response adapter "+this.toString()+" must implement the required method `"+e+"`")}},t(n(Em,"Auth"),"AuthResponse",Ember.Object.extend({canonicalize:e("canonicalize")}))}.call(this),void function(){var e,n=Ember.get,t=Ember.set;e=function(e){return function(){throw new(n(Em,"Error"))("Your strategy adapter "+this.toString()+" must implement the required method `"+e+"`")}},t(n(Em,"Auth"),"AuthStrategy",Ember.Object.extend({serialize:e("serialize"),deserialize:e("deserialize")}))}.call(this),void function(){var e,n=Ember.get,t=Ember.set;e=function(e){return function(){throw new(n(Em,"Error"))("Your session adapter "+this.toString()+" must implement the required method `"+e+"`")}},t(n(Em,"Auth"),"AuthSession",Ember.Object.extend({init:function(){return n(this,"auth").reopen({signedIn:n(Em,"computed").alias("_session.signedIn"),userId:n(Em,"computed").alias("_session.userId"),startTime:n(Em,"computed").alias("_session.startTime"),endTime:n(Em,"computed").alias("_session.endTime")}),n(this,"auth").addHandler("signInSuccess",n(this,"start")),n(this,"auth").addHandler("signOutSuccess",n(this,"end"))},signedIn:!1,userId:null,startTime:null,endTime:null,start:function(){return t(this,"signedIn",!0),t(this,"startTime",new Date),t(this,"endTime",null)},end:function(){return t(this,"signedIn",!1),t(this,"userId",null),t(this,"startTime",null),t(this,"endTime",new Date)},retrieve:e("retrieve"),store:e("store"),remove:e("remove")}))}.call(this);var get$=Ember.get;get$(Em,"Auth").reopen({request:"jquery",response:"json",strategy:"token",session:"cookie",modules:[],signInEndPoint:null,signOutEndPoint:null,baseUrl:null});