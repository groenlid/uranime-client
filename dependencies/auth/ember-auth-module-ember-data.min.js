// Generated by EmberScript 0.0.7
var get$=Ember.get;Em.onLoad("Ember.Application",function(e){return e.initializer({name:"ember-auth.module.ember-data",before:"ember-auth-load",initialize:function(e,t){return t.register("authModule:emberData",get$(get$(Em,"Auth"),"EmberDataAuthModule"),{singleton:!0}),t.inject("authModule:emberData","auth","auth:main"),t.inject("authModule:emberData","store","store:main")}}),e.initializer({name:"ember-auth.module.ember-data-load",after:"ember-auth-load",initialize:function(e,t){return e.lookup("authModule:emberData")}})});var get$=Ember.get,set$=Ember.set;set$(get$(Em,"Auth"),"EmberDataAuthModule",Ember.Object.extend({init:function(){return get$(this,"auth")._config("emberData",get$(this,"_defaultConfig")),null!=get$(this,"config")||set$(this,"config",get$(this,"auth")._config("emberData")),this.patch(),get$(this,"auth").reopen({user:get$(Em,"computed").alias("module.emberData.user")}),get$(this,"auth").addHandler("signInSuccess",get$(this,"findUser").bind(this)),get$(this,"auth").addHandler("signInError",get$(this,"clearUser").bind(this)),get$(this,"auth").addHandler("signOutSuccess",get$(this,"clearUser").bind(this))},_defaultConfig:{userModel:!1},user:null,findUser:function(){var e;if(null==get$(get$(this,"auth"),"userId")||!get$(get$(this,"config"),"userModel"))return;return get$(this,"store").find(get$(get$(this,"config"),"userModel"),get$(get$(this,"auth"),"userId")).then((e=this,function(t){return set$(e,"user",t)}))},clearUser:function(){return set$(this,"user",null)},patch:function(){var e;return e=this,get$(DS,"RESTAdapter").reopen({ajax:function(t,n,r){return this._super(t,n,get$(get$(e,"auth"),"_strategy").serialize(r||{}))}})}}));